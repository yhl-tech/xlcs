# 生产环境部署检查清单

## 构建前检查

### 环境配置
- [ ] `.env.production` 文件已创建并配置正确的 API 地址
- [ ] `VITE_API_BASE_URL` 指向正确的生产环境 API 地址
- [ ] WebSocket URL 配置正确（如果使用 WebSocket）

### 代码检查
- [ ] 所有调试代码和 console.log 已移除或禁用
- [ ] 敏感信息（如 API Key）未硬编码在前端代码中
- [ ] 所有外部资源链接（图片、音频等）正确无误
- [ ] 用户认证和权限检查逻辑已验证

### 依赖检查
- [ ] 所有依赖包版本稳定且无已知安全漏洞
- [ ] CDN 引入的库版本稳定且有备用方案

## 构建过程

### 构建命令
- [ ] 执行 `pnpm build` 或 `pnpm build:prod` 进行生产构建
- [ ] 构建过程无错误和警告
- [ ] 构建输出文件大小合理

### 输出验证
- [ ] `dist/` 目录已生成
- [ ] 所有必要的静态资源已正确复制
- [ ] HTML、CSS、JS 文件已正确压缩
- [ ] 文件名包含 hash 值以支持缓存策略

## 部署配置

### Web 服务器
- [ ] Web 服务器已配置并运行
- [ ] 根目录指向 `dist/` 目录
- [ ] SPA 路由已正确配置（所有路由指向 index.html）
- [ ] 静态资源缓存策略已配置
- [ ] HTTPS 已配置并启用

### 反向代理（如需要）
- [ ] API 请求代理已配置
- [ ] WebSocket 代理已配置（如使用）
- [ ] CORS 策略已正确设置

## 安全检查

### 前端安全
- [ ] Content Security Policy (CSP) 已配置
- [ ] X-Frame-Options 已设置
- [ ] X-Content-Type-Options 已设置
- [ ] Referrer-Policy 已设置

### 后端安全
- [ ] API 接口有适当的身份验证
- [ ] 敏感操作有权限控制
- [ ] 输入验证和过滤已实施
- [ ] 速率限制已配置

## 性能优化

### 资源优化
- [ ] 图片已压缩并使用合适的格式
- [ ] CSS 和 JS 文件已压缩
- [ ] 大型库考虑使用 CDN
- [ ] 非关键 CSS 已延迟加载

### 缓存策略
- [ ] 静态资源缓存头已设置
- [ ] HTML 文件缓存策略合理
- [ ] Service Worker 已配置（如使用 PWA）

## 功能测试

### 核心功能
- [ ] 用户登录/注册功能正常
- [ ] 测试流程完整无错误
- [ ] 音频录制和播放功能正常
- [ ] 数据提交和报告下载功能正常

### 兼容性测试
- [ ] 主流浏览器兼容性测试通过
- [ ] 移动端适配测试通过
- [ ] 不同网络环境下的表现测试

## 监控和维护

### 错误监控
- [ ] 前端错误监控已集成
- [ ] API 请求监控已配置
- [ ] 性能监控已设置

### 日志配置
- [ ] 访问日志已配置
- [ ] 错误日志已配置
- [ ] 日志轮转策略已设置

## 上线准备

### 备份
- [ ] 当前生产环境已备份
- [ ] 数据库已备份（如适用）
- [ ] 配置文件已备份

### 回滚计划
- [ ] 回滚脚本已准备
- [ ] 上一版本文件已保存
- [ ] 回滚流程已验证

### 通知
- [ ] 维护通知已准备（如需要）
- [ ] 相关团队已通知
- [ ] 用户通知已准备（如需要）

## 部署后验证

### 功能验证
- [ ] 页面加载正常
- [ ] 用户登录/注册功能正常
- [ ] 核心业务流程可完成
- [ ] 所有链接和按钮功能正常

### 性能验证
- [ ] 页面加载速度符合预期
- [ ] API 响应时间正常
- [ ] 无明显性能瓶颈

### 安全验证
- [ ] HTTPS 正常工作
- [ ] 无安全警告
- [ ] 敏感信息未泄露